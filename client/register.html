<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Registration Form</title>
   <link rel="stylesheet" href="registerstyles.css">
</head>

<body>
   <div class="wrapper">
      <div class="title">
         Registration Form
      </div>
      <div class="form" id=reg-form>
         <div class="inputfield">
            <label>First Name</label>
            <input type="text" class="input" id="firstname">
         </div>
         <div class="inputfield">
            <label>Last Name</label>
            <input type="text" class="input" id="lastname">
         </div>
         <div class="inputfield">
            <label>Password</label>
            <input type="password" class="input" id="password">
         </div>
         <div class="inputfield">
            <label>Confirm Password</label>
            <input type="password" class="input" id="confirmPassword">
         </div>
         <div class="inputfield">
            <label>Email Address</label>
            <input type="text" class="input" id="email">
         </div>
         <div class="inputfield">
            <label>Phone Number</label>
            <input type="text" class="input" id="phone">
         </div>
         <div class="inputfield">
            <label>Serial Number</label>
            <input type="text" class="input" id="serial">
         </div>
         <div class="inputfield" id=submit>
            <input type="submit" value="Register" class="btn" id="comp">
         </div>
      </div>
   </div>
   <script>
      const input = document.getElementById('comp')
      input.addEventListener('click', registerUser);

      async function registerUser(event) {
         event.preventDefault()
         const firstname = document.getElementById('firstname').value;
         const lastname = document.getElementById('lastname').value;
         const password = document.getElementById('password').value;
         const email = document.getElementById('email').value;
         const phone = document.getElementById('phone').value;
         const serial = document.getElementById('serial').value;

         const result = await fetch('/api/register', {
            method: 'POST',
            headers: {
               'Content-Type': 'application/json'
            },
            body: JSON.stringify({
               firstname,
               lastname,
               password,
               email,
               phone,
               serial
            })
         }).then((res) => res.json())
         if (result.status === 'ok') {
            alert('Success');
            window.location.assign("./login.html");
         } else {
            alert(result.error)
         }
      }
   </script>
</body>

</html>